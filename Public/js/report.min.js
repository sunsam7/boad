/*! http://js.3conline.com/wap/pcauto/2014/touch/zhibo_cmt2014.js */
(function(U){var z=location.href,i=CONSTANT.voteUrl||"",v="m_CMT4_IP_AREA",B=CONSTANT.cmtListUrl||""+escape(CONSTANT.wwwURL)+"",H=CONSTANT.cmtPostUrl||"",J=CONSTANT.cmtCountUrl||""+escape(CONSTANT.wwwURL),d,N=0,I="",j="",R,P,b='',aa=navigator.userAgent.toLowerCase(),E=/micromessenger/i.test(aa),ab="",O="";CONSTANT.broadcastId=CONSTANT.wwwURL.split("broadcastId=")[1];var F={get:function(X,am){var an=new XMLHttpRequest();an.open("GET",X,true);an.onreadystatechange=function(){if(an.readyState==4&&an.status==200||an.status==304){am.call(this,an.responseText);}};an.send(null);},post:function(X,an,am){var ao=new XMLHttpRequest();ao.open("POST",X,true);ao.setRequestHeader("Content-type","application/x-www-form-urlencoded");ao.onreadystatechange=function(){if(ao.readyState==4&&(ao.status==200||ao.status==304)){am.call(this,ao.responseText);}};ao.send(an);}};var c={get:function(an){an=encodeURIComponent(an);var at=document.cookie.split(";");var ao="";var aq="";var ar="";var ap=false;var am="";var X=at.length;for(am=0;am<X;am++){ao=at[am].split("=");aq=ao[0].replace(/^\s+|\s+$/g,"");if(aq==an){ap=true;if(ao.length>1){ar=decodeURIComponent(ao[1].replace(/^\s+|\s+$/g,""));}return ar;break;}ao=null;aq="";}if(!ap){return null;}},set:function(an,ap,X,at,ao,ar){var am=new Date();am.setTime(am.getTime());if(X){X=X*1000*60*60*24;}var aq=new Date(am.getTime()+(X));document.cookie=encodeURIComponent(an)+"="+encodeURIComponent(ap)+((X)?";expires="+aq.toGMTString():"")+((at)?";path="+at:"")+((ao)?";domain="+ao:"")+((ar)?";secure":"");}};function u(am,X,ao,an){am.addEventListener(ao,function(ap){if(ac(ap.target,X)){if(an){an.call(ap.target,ap);}}});}function ac(am,X){if(X.charAt(0)==="#"){return am.id===X.slice(1);}if(X.charAt(0)==="."){return(" "+am.className+" ").indexOf(" "+X.slice(1)+" ")!=-1;}return am.tagName.toLowerCase()===X.toLowerCase();}function w(ao,am){var X,an=ao.parentNode;while(an){if(ac(an,am)){X=an;break;}an=an.parentNode;}return X;}function h(an){var X=[],am;for(am in an){if(an.hasOwnProperty(am)){X.push(""+am+"="+an[am]);}}return X.join("&");}function q(){document.getElementById("captchax").src=""+new Date().getTime();}function r(X){var an=document.getElementById("cmtCheck"),am=document.getElementById("cmtCheck_pop");if(X){N=1;an.style.display="block";am.style.display="block";q();}else{N=0;an.style.display="none";am.style.display="none";}}function l(X){var am="";if(X.pro==X.city){am=X.city;}else{am=X.pro+X.city;}if(!am){am="";}am=am;c.set(v,am,1,"/","m.pcauto.com.cn","");c.set("mcoov","2",90,"/","m.pcauto.com.cn","");return am;}function ah(X){var am=w(X,".comment");if(am){am.className=am.className=="comment face-open"?"comment":"comment face-open";}}function T(ao){var ap=w(ao,".c-wrap");if(!ap){return;}var am=document.getElementById("comment_pop"),aq=ap.getAttribute("data-meta"),X="",an="";if(aq){X=aq.split(",");an="回复"+X[0]+"楼("+X[1]+")：";}else{an="输入回复内容";}if(am.parentNode==ap){if(ao.innerHTML=="回复"){ao.innerHTML="收起";am.style.display="block";document.getElementById("content_pop").placeholder=an;}else{ao.innerHTML="回复";am.style.display="none";}}else{if(P){P.querySelector(".repost").innerHTML="回复";}ao.innerHTML="收起";P=ap;ap.appendChild(am);am.style.display="block";document.getElementById("content_pop").placeholder=an;}}function G(am){var an=w(am,".c-wrap");if(!an){return;}var X=document.getElementById("comment");metaData="";holderhtml="输入回复内容";if(X.parentNode!=an){R=an;an.appendChild(X);X.style.display="block";document.getElementById("content").placeholder=holderhtml;}}function D(am,X){document.body.insertBefore(document.createElement("script"),document.body.firstChild).src=i+"?cid="+am+"&sp="+X+"&r="+Math.random();}function M(am){var ax=document.getElementById(am);if(!ax){return;}var aw=18;var aq=document.getElementById("Jplus1");if(!aq){aq=document.createElement("div");aq.id="Jplus1";aq.style.cssText="/*display:none;*/ position:absolute; width:"+aw+"px; line-height:20px; color:#F00; font-weight:bold; opacity:0;";aq.innerHTML="+1";document.body.appendChild(aq);}var X=aq.style;X.webkitTransition="";var an=ax.parentNode,au=an.getBoundingClientRect(),av=an.offsetWidth;var ar=document.body.scrollTop,ap=document.body.scrollLeft;var ao=ap+au.left+av/2-aw/2,at=ar+au.top-20;X.display="block";X.left=ao+"px";X.top=at+"px";X.opacity=1;setTimeout(function(){X.webkitTransition="all 0.3s ease-in";X.opacity=0;X.top=at-20+"px";setTimeout(function(){X.display="none";},300);},100);}function ai(aq){var ao=document.getElementById("topTipMsg");var am=document.body.clientWidth;var X=Math.min(am,600);var ap=(am-X)/2;var an="22px";if(!ao){ao=document.createElement("div");ao.id="topTipMsg";ao.style.cssText="position:fixed; top:-"+an+"; width:"+X+"px; height:22px; line-height:22px; font-size:14px; background:rgba(48,48,48,0.7); color:#ccc; line-height:1.5; text-align:center; -webkit-transition:top 0.3s ease-in; -webkit-border-radius:0 0 5px 5px;-moz-border-radius:0 0 5px 5px;border-radius:0 0 5px 5px;z-index:1000;";document.body.appendChild(ao);}ao.innerHTML=aq;ao.style.display="block";ao.style.left=ap+"px";setTimeout(function(){ao.style.top="0";},0);}function a(ar){var X=w(ar,"li"),aq=X.querySelector(".c-list"),at=document.getElementById("comment"),an=document.getElementById("Jcomment").querySelectorAll(".c-list");ab=X.getAttribute("data-partid");for(var ap=0;ap<an.length;ap++){if(an[ap].style.display!=="none"&&aq!=an[ap]){an[ap].style.display="none";}}G(ar);var am=w(ar,".c-wrap");var ao=am.offsetTop;console.log(ar.innerHTML);}function y(an){if(an.error){return;}O=an.id;var am=document.getElementById("cmtCount"),ao=document.getElementById("cmtCountA"),X=document.getElementById("comment-btn"),ap=""+an.id+"_1_30_"+CONSTANT.broadcastId+".html";if(am){am.innerHTML="网友评论<em>("+an.total+")</em> >> ";am.href=ap;}if(ao){ao.innerHTML="网友评论<em>("+an.total+")</em>";ao.href=ap;}if(X){X.href=ap;}}function ag(){c.set("cmu","",-1,"/",".pcauto.com.cn");c.set("common_session_id","",-1,"/",".pcauto.com.cn");c.set("logedUserId","",-1,"/",".pcauto.com.cn");c.set("logedUserName","",-1,"/",".pcauto.com.cn");var X=document.querySelectorAll(".comment .c-user");if(document.getElementById("JuserInfo")){document.getElementById("JuserInfo").innerHTML="";}}function k(){if(c.get("common_session_id")&&c.get("cmu")){c.set("userBackUrl",U.location.href,30,"/","pcauto.com.cn");}}function ad(an){I=an.nickName;var ao=an.id||"";var X=document.querySelectorAll(".comment .c-user");}function Z(){I=c.get("logedUserName");var X=document.querySelectorAll(".comment .c-user");}function al(){var X;}function ae(){var X=document.querySelectorAll(".comment .c-user a"),ao=X.length,an=U.location.href;}function x(){var ao=document.getElementById("J-main");var X=document.querySelectorAll(".comment .c-face-btn");for(var an=X.length-1;an>=0;an--){(function(aq){var ap=X[aq];ap.addEventListener("click",function(at){var ar=ap.parentNode,au=ar.querySelector(".c-face-list");if(au.children.length==0){au.innerHTML=b;}ah(ap,".comment");});})(an);}var am=Array.prototype.slice.call(document.querySelectorAll(".comment .c-face-list"));am.forEach(function(ap){var aq=ap.getElementsByTagName("img");u(ap,"img","click",function(){var au=this;au.className="hlight";setTimeout(function(){au.className="";},300);var at=w(this,".comment");if(at){var ar=at.querySelector("textarea");if(ar){ar.value+=this.title;}}});});document.getElementById("cmtSubmit").addEventListener("click",function(ap){if(this.getAttribute("disabled")=="1"){return;}this.setAttribute("disabled","1");replyObj={};C(W());});document.getElementById("cmtSubmit_pop").addEventListener("click",function(av){if(this.getAttribute("disabled")=="1"){return;}this.setAttribute("disabled","1");replyObj={};var at=w(this,".c-wrap"),ar,au,aq;if(at){aq=at.getAttribute("data-meta").split(",");ar=at.querySelector(".c-tb > .c-body");au=at.querySelector(".c-tb .c-repeat");replyObj.content=ar.innerHTML;if(au){replyObj.quoteContent=au.innerHTML;}replyObj.floor=aq[0];replyObj.uname=aq[1];}var ap={isPop:1,replyFloor2:replyObj.floor||0};C(W("_pop",ap));});u(ao,".repost","click",function(ap){T(this);});u(ao,".repost_pop","click",function(ap){a(this);});}function K(){var am=document.getElementById("Jfont");if(am){var X=am.querySelector("em");var an=document.querySelector(".artBody");am.addEventListener("click",function(){an.style.fontSize=an.style.fontSize=="18px"?"16px":"18px";X.innerHTML=X.innerHTML=="-"?"+":"-";});}var ao=document.getElementById("btnTop");if(ao){ao.addEventListener("click",function(){U.scrollTo(0,0);},false);}ae();}U.Util={Ajax:F,Cookie:c,getCaptcha:q,setArea:l,signOut:ag,updateUser:ad,showTopTip:ai};U.Cookie=c;U.Ajax=F;U.cmt4_vote=D;U.cmt4_vote_success=M;U.parseCmtCount=y;U.closest=w;U.signOut=ag;U.loginUserInfo=Z;U.userInfo=k;U.scrollTo(0,0);x();})(this);